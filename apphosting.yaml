runtime: nodejs20

env:
  - variable: GEMINI_API_KEY
      # Make sure to set this secret in your Google Cloud project.
          # gcloud secrets create GEMINI_API_KEY --project=<your-project-id>
              # gcloud secrets versions add GEMINI_API_KEY --data-file=- --project=<your-project-id> (and then enter your key)
                  # Don't forget to grant the service account permissions to access the secret.
                      secret: GEMINI_API_KEY

                      runConfig:
                        # The maximum number of concurrent requests your backend can handle.
                          # This value should be adjusted based on your application's needs.
                            # For AI-heavy apps, you might need to keep this lower to avoid
                              # overloading a single instance.
                                concurrency: 80

                                  # The maximum number of instances that can be spun up.
                                    maxInstances: 2

                                      # The minimum number of instances to keep running.
                                        # Setting to 1 or higher can reduce cold starts.
                                          minInstances: 0

                                            # The amount of CPU to allocate to each instance.
                                              # This value is in "CPU units". 1 CPU unit corresponds to 1 vCPU.
                                                cpu: 1

                                                  # The amount of memory to allocate to each instance.
                                                    memoryMiB: 1024

                                                    # Health check settings to ensure your application is running correctly.
                                                    healthCheck:
                                                      # The path to your health check endpoint.
                                                        # Next.js apps don't have a default health check endpoint, you may need to create one.
                                                          # For now, we'll use the root path.
                                                            path: /
                                                            
